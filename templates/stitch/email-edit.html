{% extends "base.html" %}
{% from 'stitch/_macros.html' import badge, icon_btn %}

{% block title %}Edit Email #{{ email.id }} - Email Management Tool{% endblock %}

{% block content %}
<div id="email-edit-page">
<main class="tw-flex-1 tw-p-6 tw-space-y-6">
    <div class="tw-flex tw-items-center tw-gap-4">
        <a href="{{ url_for('emails.email_detail_stitch', id=email.id) }}" class="tw-text-zinc-400 hover:tw-text-zinc-200">
            <span class="material-symbols-outlined">arrow_back</span>
        </a>
        <div>
            <h1 class="tw-text-2xl tw-font-bold tw-text-white">Edit Email</h1>
            <p class="tw-text-zinc-400 tw-text-sm tw-mt-1">Email #{{ email.id }}</p>
        </div>
    </div>

    <form method="POST" class="tw-space-y-6">
        <!-- Subject -->
        <div class="tw-bg-background tw-border tw-border-border tw-p-4">
            <label for="subject" class="tw-block tw-text-sm tw-font-medium tw-text-zinc-300 tw-mb-2">Subject</label>
            <input
                type="text"
                id="subject"
                name="subject"
                value="{{ email.subject or '' }}"
                class="tw-w-full tw-bg-zinc-900 tw-border tw-border-zinc-700 tw-text-zinc-100 tw-px-3 tw-py-2 tw-text-sm focus:tw-ring-primary focus:tw-border-primary"
                required
            />
        </div>

        <!-- Body Text -->
        <div class="tw-bg-background tw-border tw-border-border tw-p-4">
            <label for="body_text" class="tw-block tw-text-sm tw-font-medium tw-text-zinc-300 tw-mb-2">Message Body</label>
            <textarea
                id="body_text"
                name="body_text"
                rows="15"
                class="tw-w-full tw-bg-zinc-900 tw-border tw-border-zinc-700 tw-text-zinc-100 tw-px-3 tw-py-2 tw-text-sm tw-font-mono focus:tw-ring-primary focus:tw-border-primary"
                required
            >{{ email.body_text or '' }}</textarea>
        </div>

        <!-- HTML Body (optional) -->
        <div class="tw-bg-background tw-border tw-border-border tw-p-4">
            <label for="body_html" class="tw-block tw-text-sm tw-font-medium tw-text-zinc-300 tw-mb-2">HTML Body (optional)</label>
            <textarea
                id="body_html"
                name="body_html"
                rows="8"
                class="tw-w-full tw-bg-zinc-900 tw-border tw-border-zinc-700 tw-text-zinc-100 tw-px-3 tw-py-2 tw-text-sm tw-font-mono focus:tw-ring-primary focus:tw-border-primary"
            >{{ email.body_html or '' }}</textarea>
        </div>

        <!-- Actions -->
        <div class="tw-flex tw-gap-3">
            <button
                type="submit"
                class="tw-bg-primary tw-text-zinc-900 tw-font-semibold tw-py-2 tw-px-6 hover:tw-bg-lime-400 tw-transition-colors tw-flex tw-items-center tw-gap-2"
            >
                <span class="material-symbols-outlined tw-text-base">save</span>
                Save Changes
            </button>
            <a
                href="{{ url_for('emails.email_detail_stitch', id=email.id) }}"
                class="tw-bg-zinc-700 tw-text-zinc-200 tw-font-semibold tw-py-2 tw-px-6 hover:tw-bg-zinc-600 tw-transition-colors tw-flex tw-items-center tw-gap-2"
            >
                Cancel
            </a>
        </div>
    </form>
</main>
</div>
{% endblock %}
