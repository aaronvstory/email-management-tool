/* ============================================================================
   STITCH COMPONENTS - Specialized Polish for Email Management UI
   Complements main.css with component-specific styles
   ============================================================================ */

/* === Panel Cards === */
.panel-card {
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: 6px;
  overflow: hidden;
}

.panel-header {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-subtle);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.panel-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.panel-body {
  padding: 20px;
}

/* === Selector Card Spacing === */
.selector-card .selector-field {
  margin-bottom: 14px;
}

.selector-card .button-bar,
.selector-card .selector-actions {
  margin-top: 8px;
}

/* === Tabs with Underline + Count Chips === */
.tabs-bar {
  display: flex;
  gap: 2px;
  border-bottom: 1px solid var(--border-subtle);
  margin-bottom: 20px;
}

.status-tab.tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  color: var(--text-secondary);
  text-decoration: none;
  border-bottom: 2px solid transparent;
  transition: var(--transition);
  cursor: pointer;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
}

.status-tab.tab:hover {
  color: var(--text-primary);
  background: rgba(255,255,255,0.05);
}

.status-tab.tab.active,
.status-tab.tab.is-active {
  color: var(--brand-primary);
  border-bottom-color: var(--brand-primary);
}

.tab .count,
.status-tab .badge {
  background: var(--bg-accent);
  color: var(--text-primary);
  font-size: 0.75rem;
  padding: 2px 8px;
  border-radius: 12px;
  min-width: 20px;
  text-align: center;
}

.tab .count.is-muted {
  background: transparent;
  color: var(--text-muted);
}

/* === Compact Status Badges === */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
}

.status-HELD {
  background: rgba(234,179,8,.20);
  color: #fde047;
}

.status-EDITED {
  background: rgba(59,130,246,.20);
  color: #93c5fd;
}

.status-RELEASED {
  background: rgba(34,197,94,.20);
  color: #86efac;
}

.status-REJECTED {
  background: rgba(239,68,68,0.15);
  color: var(--danger);
  border: 1px solid rgba(239,68,68,0.3);
}

.status-DISCARDED {
  background: rgba(156,163,175,0.15);
  color: var(--text-muted);
  border: 1px solid rgba(156,163,175,0.3);
}

.status-meta {
  display: inline-flex;
  gap: 6px;
  margin-top: 4px;
  font-size: 12px;
  font-weight: 600;
}

/* === Email Table Fixed Layout === */
.email-table {
  table-layout: fixed;
}

/* REMOVED 2025-10-30 - Old fixed-width column rules (Fix #5) */
/* .col-select{width:40px;} */
/* .col-time{width:180px;} */
/* .col-correspondents{width:300px;} */
/* .col-subject{width:auto;} */
/* .col-status{width:180px;} */
/* .col-actions{width:220px;} */

/* === Truncation Helpers === */
.truncate-1{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.truncate-2{
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

/* === Row Actions === */
.row-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.action-buttons {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: wrap;
}

.action-btn,
.icon-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border: 1px solid var(--border-default);
  border-radius: 4px;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition);
}

.action-btn:hover,
.icon-btn:hover {
  background: rgba(255,255,255,0.05);
  color: var(--text-primary);
}

.more-trigger.btn-ghost {
  width: 32px;
  height: 32px;
  padding: 0;
  min-height: 32px;
}

/* === Modal Unified Chrome === */
.modal-unified .modal-content {
  background: var(--bg-surface);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
}

.modal-unified .modal-header {
  background: var(--bg-elevated);
  border-bottom: 1px solid var(--border-subtle);
  color: var(--text-primary);
}

.modal-unified .modal-footer {
  background: var(--bg-elevated);
  border-top: 1px solid var(--border-subtle);
}

/* 1) Tabs: underline, alignment, spacing */
.status-tabs.tabs-bar {
  margin-top: 8px;
  gap: 8px;
}
.status-tabs .tab {
  padding: 6px 10px 10px;
  border-bottom: 2px solid transparent;
  line-height: 1.1;
}
.status-tabs .tab.active,
.status-tabs .tab[aria-current="true"] {
  border-bottom-color: var(--brand-primary);
}
.status-tabs .tab .count,
.status-tabs .tab .badge {
  position: relative;
  top: -1px; /* vertically center the pill with label */
}

/* 2) Emails table: fixed columns, ellipsis, vertical centering */
.table-modern.email-table {
  table-layout: fixed;
}
.email-table col.col-select      { width: 32px; }
.email-table col.col-time        { width: 11ch; }      /* e.g., Oct 29, 02:44 AM */
.email-table col.col-correspondents { width: 28ch; }   /* stable */
.email-table col.col-status      { width: 10ch; }
.email-table col.col-actions     { width: 160px; }     /* six icon buttons fit cleanly */
.email-table col.col-subject     { width: auto; }

.email-table th, .email-table td {
  vertical-align: middle;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 36px;
}

/* Allow multi-line ONLY for correspondents; subject stays one-line for scan-ability */
.email-table td:nth-child(3) {  /* correspondents column */
  white-space: normal;
  line-height: 1.25;
  max-height: 2.5em;
}

/* 3) Status chips: contrast + centering */
.badge.status, .badge[data-status] {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 72px;
  height: 22px;
  padding: 0 8px;
  border-radius: 999px;
  font-size: 12px;
}
.badge[data-status="HELD"]      { background: #4b3a00; color: #ffd46a; }
.badge[data-status="RELEASED"]  { background: #083a12; color: #7bffa9; }
.badge[data-status="DISCARDED"] { background: #3a0b0b; color: #ff8a8a; }
.badge[data-status="UNKNOWN"]   { background: #2a2a2a; color: #dcdcdc; }

/* 4) Row actions: consistent hit targets */
.table-modern .btn-icon,
.table-modern .icon-btn {
  width: 28px; height: 28px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  margin-left: 4px;
}
.table-modern td:last-child {  /* actions column */
  white-space: nowrap;
}

/* 5) Bulk actions: order, spacing, size */
.bulk-actions,
.actions-toolbar { gap: 8px; }
.bulk-actions .btn { height: 30px; line-height: 28px; padding: 0 10px; }
.bulk-actions .btn-warning { order: 2; }   /* Discard */
.bulk-actions .btn-danger  { order: 3; }   /* Delete Permanently */
.bulk-actions .btn-success { order: 1; }   /* Release */

/* 6) Search bars: breathing room */
.search-group, .emails-search, .dashboard-search {
  margin-top: 8px;
  margin-bottom: 8px;
}

/* 7) Left nav count pill baseline */
.sidebar .nav-item .count {
  position: relative; top: -1px;
}

/* 8) Compose: toolbar grouping + send button clarity */
.compose-toolbar .btn {
  border-radius: 4px 0 0 4px;
}
.compose-toolbar .btn + .btn {
  border-radius: 0;
  margin-left: 0;
}
.compose-toolbar .btn:last-child {
  border-radius: 0 4px 4px 0;
}

/* If "Send Email" is disabled style, make disabled obvious but keep contrast when enabled */
.btn-primary[disabled] {
  opacity: 0.5;
}

/* Tabs: cover other “active” patterns JS might set */
.status-tabs .tab.is-active,
.status-tabs .tab[aria-selected="true"],
.status-tabs .tab[data-active="true"] {
  border-bottom-color: var(--brand-primary);
}

/* Bulk actions: your markup often uses .toolbar-actions */
.toolbar-actions { gap: 8px; }
.toolbar-actions .btn { height: 30px; line-height: 28px; padding: 0 10px; }
.toolbar-actions .btn-success { order: 1; }  /* Release */
.toolbar-actions .btn-warning { order: 2; }  /* Discard */
.toolbar-actions .btn-danger  { order: 3; }  /* Delete Permanently */

/* Compose toolbar: current classes are .email-toolbar and .toolbar-btn */
.email-toolbar .toolbar-btn {
  border-radius: 4px 0 0 4px;
}
.email-toolbar .toolbar-btn + .toolbar-btn {
  border-radius: 0;
  margin-left: 0;
}
.email-toolbar .toolbar-btn:last-child {
  border-radius: 0 4px 4px 0;
}

/* Compose CTA is .btn-primary-modern */
.btn-primary-modern[disabled] { opacity: 0.5; }

/* Sidebar count pill in your skin */
.sidebar-modern .nav-item-link .badge,
.sidebar .nav-item .count { position: relative; top: -1px; }
